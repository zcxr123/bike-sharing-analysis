<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>共享单车数据分析</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://assets.pyecharts.org/assets/v5/echarts.min.js"></script>
    <style>
        :root {
            --bg-gradient-1: #f0f4ff;
            --bg-gradient-2: #f7f9fb;
            --card: #ffffff;
            --card-shadow: rgba(17, 24, 39, 0.08);
            --card-hover-shadow: rgba(17, 24, 39, 0.12);
            --muted: #6b7280;
            --accent: #2563eb;
            --accent-light: #60a5fa;
            --border: #e5e7eb;
            --text-dark: #111827;
            --text-medium: #374151;
            --radius: 16px;
            --max-width: 1400px;
        }
        
        * {
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            margin: 0;
            font-family: 'Noto Sans SC', system-ui, -apple-system, "Segoe UI", Roboto, 'Helvetica Neue', Arial;
            background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 100%);
            color: var(--text-dark);
            line-height: 1.6;
        }
        
        .wrapper {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 32px 24px;
        }
        
        header.site-header {
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: 0 4px 20px var(--card-shadow);
            padding: 32px;
            margin-bottom: 32px;
            border-left: 4px solid var(--accent);
        }
        
        .title-group h1 {
            margin: 0 0 8px 0;
            font-size: 32px;
            font-weight: 700;
            color: var(--text-dark);
            letter-spacing: -0.5px;
        }
        
        .title-group p {
            margin: 0;
            color: var(--muted);
            font-size: 15px;
            font-weight: 400;
        }
        
        .meta {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }
        
        .meta small {
            color: var(--muted);
            font-size: 13px;
        }
        
        .grid {
            display: grid;
            gap: 28px;
        }
        
        .card {
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: 0 4px 20px var(--card-shadow);
            padding: 28px;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }
        
        .card:hover {
            box-shadow: 0 8px 30px var(--card-hover-shadow);
            transform: translateY(-2px);
        }
        
        .card-title {
            font-weight: 600;
            font-size: 20px;
            margin: 0 0 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            border-radius: 2px;
        }
        
        .chart-container {
            width: 100%;
            height: 500px;
            margin: 0 auto;
        }
        
        .chart-container.medium {
            height: 420px;
        }
        
        .chart-container.tall {
            height: 550px;
        }
        
        /* 季节与天气板块的特殊样式 */
        .season-weather-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 28px;
        }
        
        @media (max-width: 1024px) {
            .season-weather-row {
                grid-template-columns: 1fr;
            }
        }
        
        footer {
            margin-top: 48px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
            color: var(--muted);
            font-size: 14px;
            text-align: center;
        }
        
        footer p {
            margin: 0;
        }
        
        @media (max-width: 768px) {
            .wrapper {
                padding: 20px 16px;
            }
            
            header.site-header {
                padding: 24px;
            }
            
            .title-group h1 {
                font-size: 24px;
            }
            
            .card {
                padding: 20px;
            }
            
            .chart-container {
                height: 350px;
            }
            
            .chart-container.medium {
                height: 320px;
            }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <header class="site-header">
            <div class="title-group">
                <h1>共享单车数据分析</h1>
                <p>按小时/区域/车辆类型展示订单与供需态势 — 可视化仅用于分析与决策参考</p>
            </div>
            <div class="meta">
                <small> 更新时间：自动生成 | 数据来源：系统统计</small>
            </div>
        </header>
        
        <main class="grid">
            <!-- 第一板块：24小时订单量趋势 -->
            <div class="card">
                <div class="card-title">📈 24 小时订单量趋势</div>
                <div id="hourly_trend" class="chart-container"></div>
            </div>
            
            <!-- 第二板块：季节与天气对订单的影响（分成两个独立图表） -->
            <div class="season-weather-row">
                <div class="card">
                    <div class="card-title">🌸 季节订单分布</div>
                    <div id="season_chart" class="chart-container medium"></div>
                </div>
                <div class="card">
                    <div class="card-title">🌤️ 天气订单分布</div>
                    <div id="weather_chart" class="chart-container medium"></div>
                </div>
            </div>
            
            <!-- 第三板块：各区域订单分布 -->
            <div class="card">
                <div class="card-title">📍 各区域订单分布</div>
                <div id="region_chart" class="chart-container medium"></div>
            </div>
            
            <!-- 第四板块：起点-终点区域热力图 -->
            <div class="card">
                <div class="card-title">🔥 起点-终点区域热力图</div>
                <div id="heatmap_chart" class="chart-container tall"></div>
            </div>
        </main>
        
    </div>
    
    <script>
        // 第一板块：24小时订单量趋势
        var chart_hourly = echarts.init(document.getElementById('hourly_trend'), 'light', {renderer: 'canvas'});
        var option_hourly = {
            animation: true,
            animationDuration: 1000,
            color: ['#2563eb', '#10b981'],
            grid: {
                left: '3%',
                right: '4%',
                bottom: '15%',
                top: '12%',
                containLabel: true
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow',
                    shadowStyle: {
                        color: 'rgba(37, 99, 235, 0.1)'
                    }
                },
                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                borderColor: '#e5e7eb',
                borderWidth: 1,
                textStyle: {
                    color: '#374151'
                }
            },
            legend: {
                data: ['订单量', '平均距离'],
                top: '2%',
                textStyle: {
                    fontSize: 13
                }
            },
            xAxis: {
                type: 'category',
                data: ['00:00','01:00','02:00','03:00','04:00','05:00','06:00','07:00','08:00','09:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00','18:00','19:00','20:00','21:00','22:00','23:00'],
                axisLine: {
                    lineStyle: {
                        color: '#d1d5db'
                    }
                },
                axisLabel: {
                    color: '#6b7280',
                    fontSize: 12
                }
            },
            yAxis: [
                {
                    type: 'value',
                    name: '订单量',
                    nameTextStyle: {
                        color: '#374151',
                        fontSize: 13
                    },
                    axisLine: {
                        show: false
                    },
                    axisLabel: {
                        color: '#6b7280',
                        fontSize: 12
                    },
                    splitLine: {
                        lineStyle: {
                            color: '#f3f4f6',
                            type: 'dashed'
                        }
                    }
                },
                {
                    type: 'value',
                    name: '平均距离(km)',
                    nameTextStyle: {
                        color: '#374151',
                        fontSize: 13
                    },
                    position: 'right',
                    min: 2.5,
                    max: 3.5,
                    axisLine: {
                        show: false
                    },
                    axisLabel: {
                        color: '#6b7280',
                        fontSize: 12
                    },
                    splitLine: {
                        show: false
                    }
                }
            ],
            series: [
                {
                    name: '订单量',
                    type: 'line',
                    smooth: true,
                    symbolSize: 8,
                    lineStyle: {
                        width: 3
                    },
                    areaStyle: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            {offset: 0, color: 'rgba(37, 99, 235, 0.3)'},
                            {offset: 1, color: 'rgba(37, 99, 235, 0.05)'}
                        ])
                    },
                    data: [4096,4224,4184,4141,4115,4166,4097,4163,4135,4152,4185,4163,4187,4216,4098,4066,4219,4241,4236,4139,4162,4123,4237,4255],
                    markPoint: {
                        data: [
                            {type: 'max', name: '最大值'},
                            {type: 'min', name: '最小值'}
                        ]
                    },
                    markLine: {
                        data: [
                            {type: 'average', name: '平均值'}
                        ]
                    }
                },
                {
                    name: '平均距离',
                    type: 'line',
                    yAxisIndex: 1,
                    smooth: true,
                    symbolSize: 6,
                    lineStyle: {
                        width: 2,
                        type: 'dashed'
                    },
                    data: [3.21,3.23,3.26,3.21,3.3,3.23,3.26,3.28,3.3,3.21,3.28,3.3,3.25,3.26,3.22,3.22,3.21,3.2,3.2,3.28,3.29,3.25,3.24,3.21]
                }
            ],
            dataZoom: [
                {
                    type: 'slider',
                    start: 0,
                    end: 100,
                    height: 30,
                    bottom: '5%',
                    handleStyle: {
                        color: '#2563eb'
                    },
                    textStyle: {
                        color: '#6b7280'
                    }
                }
            ]
        };
        chart_hourly.setOption(option_hourly);

        // 第二板块-左：季节订单分布
        var chart_season = echarts.init(document.getElementById('season_chart'), 'light', {renderer: 'canvas'});
        var option_season = {
            animation: true,
            animationDuration: 1000,
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                },
                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                borderColor: '#e5e7eb',
                borderWidth: 1
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '10%',
                top: '15%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                data: ['Summer', 'Winter', 'Fall', 'Spring'],
                axisLine: {
                    lineStyle: {
                        color: '#d1d5db'
                    }
                },
                axisLabel: {
                    color: '#6b7280',
                    fontSize: 12
                }
            },
            yAxis: {
                type: 'value',
                name: '订单量',
                nameTextStyle: {
                    color: '#374151',
                    fontSize: 13
                },
                axisLine: {
                    show: false
                },
                axisLabel: {
                    color: '#6b7280',
                    fontSize: 12
                },
                splitLine: {
                    lineStyle: {
                        color: '#f3f4f6',
                        type: 'dashed'
                    }
                }
            },
            series: [
                {
                    name: '订单量',
                    type: 'bar',
                    data: [25044, 24976, 24730, 25250],
                    barWidth: '60%',
                    itemStyle: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            {offset: 0, color: '#60a5fa'},
                            {offset: 0.7, color: '#2563eb'},
                            {offset: 1, color: '#1e40af'}
                        ]),
                        borderRadius: [8, 8, 0, 0]
                    },
                    label: {
                        show: true,
                        position: 'top',
                        color: '#374151',
                        fontSize: 12,
                        fontWeight: 'bold'
                    }
                }
            ]
        };
        chart_season.setOption(option_season);

        // 第二板块-右：天气订单分布
        var chart_weather = echarts.init(document.getElementById('weather_chart'), 'light', {renderer: 'canvas'});
        var option_weather = {
            animation: true,
            animationDuration: 1000,
            tooltip: {
                trigger: 'item',
                formatter: '{b}: {c} ({d}%)',
                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                borderColor: '#e5e7eb',
                borderWidth: 1
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                top: 'middle',
                textStyle: {
                    fontSize: 13,
                    color: '#374151'
                }
            },
            series: [
                {
                    type: 'pie',
                    radius: ['35%', '70%'],
                    center: ['60%', '50%'],
                    avoidLabelOverlap: true,
                    itemStyle: {
                        borderRadius: 8,
                        borderColor: '#fff',
                        borderWidth: 2
                    },
                    label: {
                        show: true,
                        formatter: '{b}\n{d}%',
                        fontSize: 12,
                        color: '#374151'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: 14,
                            fontWeight: 'bold'
                        },
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.3)'
                        }
                    },
                    data: [
                        {value: 49879, name: 'Clear', itemStyle: {color: '#fbbf24'}},
                        {value: 30210, name: 'Cloudy', itemStyle: {color: '#94a3b8'}},
                        {value: 14889, name: 'Light Rain', itemStyle: {color: '#60a5fa'}},
                        {value: 5022, name: 'Heavy Rain', itemStyle: {color: '#3b82f6'}}
                    ]
                }
            ]
        };
        chart_weather.setOption(option_weather);

        // 第三板块：各区域订单分布
        var chart_region = echarts.init(document.getElementById('region_chart'), 'light', {renderer: 'canvas'});
        var option_region = {
            animation: true,
            animationDuration: 1000,
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                },
                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                borderColor: '#e5e7eb',
                borderWidth: 1
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '10%',
                top: '12%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                data: ['B Downtown', 'A Capitol Hill', 'C Georgetown', 'D Dupont Circle', 'F Navy Yard', 'E Shaw'],
                axisLine: {
                    lineStyle: {
                        color: '#d1d5db'
                    }
                },
                axisLabel: {
                    color: '#6b7280',
                    fontSize: 11,
                    rotate: 20
                }
            },
            yAxis: {
                type: 'value',
                name: '订单量',
                nameTextStyle: {
                    color: '#374151',
                    fontSize: 13
                },
                axisLine: {
                    show: false
                },
                axisLabel: {
                    color: '#6b7280',
                    fontSize: 12
                },
                splitLine: {
                    lineStyle: {
                        color: '#f3f4f6',
                        type: 'dashed'
                    }
                }
            },
            series: [
                {
                    name: '订单量',
                    type: 'bar',
                    data: [24968, 24941, 14952, 14826, 10171, 10142],
                    barWidth: '50%',
                    itemStyle: {
                        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [
                            {offset: 0, color: '#3b82f6'},
                            {offset: 0.7, color: '#60a5fa'},
                            {offset: 1, color: '#93c5fd'}
                        ]),
                        borderRadius: [8, 8, 0, 0]
                    },
                    label: {
                        show: true,
                        position: 'top',
                        color: '#374151',
                        fontSize: 11,
                        fontWeight: 'bold'
                    }
                }
            ]
        };
        chart_region.setOption(option_region);

        // 第四板块：起点-终点区域热力图
        var chart_heatmap = echarts.init(document.getElementById('heatmap_chart'), 'light', {renderer: 'canvas'});
        var option_heatmap = {
            animation: true,
            animationDuration: 1000,
            tooltip: {
                position: 'top',
                formatter: function(params) {
                    return '起点: ' + params.name.split(' -> ')[0] + '<br/>' +
                           '终点: ' + params.name.split(' -> ')[1] + '<br/>' +
                           '订单量: ' + params.value[2];
                },
                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                borderColor: '#e5e7eb',
                borderWidth: 1
            },
            grid: {
                height: '70%',
                top: '12%',
                left: '12%',
                right: '5%'
            },
            xAxis: {
                type: 'category',
                data: ['B Downtown', 'A Capitol Hill', 'C Georgetown', 'D Dupont Circle', 'F Navy Yard', 'E Shaw'],
                name: '终点区域',
                nameLocation: 'middle',
                nameGap: 35,
                nameTextStyle: {
                    color: '#374151',
                    fontSize: 13,
                    fontWeight: 'bold'
                },
                splitArea: {
                    show: true
                },
                axisLabel: {
                    color: '#6b7280',
                    fontSize: 11,
                    rotate: 30
                },
                axisLine: {
                    lineStyle: {
                        color: '#d1d5db'
                    }
                }
            },
            yAxis: {
                type: 'category',
                data: ['B Downtown', 'A Capitol Hill', 'C Georgetown'],
                name: '起点区域',
                nameLocation: 'middle',
                nameGap: 50,
                nameTextStyle: {
                    color: '#374151',
                    fontSize: 13,
                    fontWeight: 'bold'
                },
                splitArea: {
                    show: true
                },
                axisLabel: {
                    color: '#6b7280',
                    fontSize: 11
                },
                axisLine: {
                    lineStyle: {
                        color: '#d1d5db'
                    }
                }
            },
            visualMap: {
                min: 2000,
                max: 8000,
                calculable: true,
                orient: 'vertical',
                right: '2%',
                top: 'center',
                textStyle: {
                    color: '#374151'
                },
                inRange: {
                    color: ['#e0f2fe', '#7dd3fc', '#38bdf8', '#0ea5e9', '#0284c7', '#0369a1']
                }
            },
            series: [
                {
                    name: '起点-终点订单热力',
                    type: 'heatmap',
                    data: [
                        [0, 0, 7445], [1, 0, 3495], [2, 0, 3567], [3, 0, 3418], [4, 0, 3530], [5, 0, 3486],
                        [0, 1, 3417], [1, 1, 7458], [2, 1, 3473], [3, 1, 3600], [4, 1, 3505], [5, 1, 3515],
                        [0, 2, 2083], [1, 2, 2103]
                    ],
                    label: {
                        show: true,
                        color: '#111827',
                        fontSize: 11,
                        fontWeight: 'bold'
                    },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        chart_heatmap.setOption(option_heatmap);

        // 响应窗口大小变化
        window.addEventListener('resize', function() {
            chart_hourly.resize();
            chart_season.resize();
            chart_weather.resize();
            chart_region.resize();
            chart_heatmap.resize();
        });
    </script>
</body>
</html>